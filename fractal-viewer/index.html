<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Fractal Viewer</title>
        <link href="style.css" rel="stylesheet">
        <script src="lib/webgl-utils.js"></script>
        <script src="lib/webgl-debug.js"></script>
        <script src="lib/cuon-utils.js"></script>
        <script src="util.js"></script>
        <script src="escape-time.js"></script>
        <script src="lyapunov.js"></script>
        <script src="root-finding.js"></script>
        <script src="pendulum.js"></script>
        <script src="recursive.js"></script>
        <script src="webgl.js"></script>
    </head>
    <body onload="main()">
        <div class="main">
            <canvas id="fractal_canvas" width="1000px" height="1000px"></canvas>
            <div class="sidebar">
                <div class="input-div">
                    Program: 
                    <select id="program">
                        <option value="escape-time">Escape Time</option>
                        <option value="lyapunov">Lyapunov</option>
                        <option value="root-finding">Root Finding</option>
                        <option value="pendulum">Pendulum</option>
                        <option value="recursive">Recursive</option>
                    </select>
                </div>
                <div id="escape_time_options">
                    <div class="input-div">
                        Fractal:
                        <select id="esc_fractal_type">
                            <optgroup label="Mandelbrot variants">
                                <option value="0">Mandelbrot</option>
                                <option value="1">Burning Ship</option>
                                <option value="2">Tricorn</option>
                                <option value="17">Simonbrot</option>
                                <option value="26">Buffalo</option>
                                <option value="5">Multibrot</option>
                                <option value="23">Complex Multibrot</option>
                                <option value="15">Rational Map</option>
                                <option value="16">Phoenix</option>
                                <option value="18">Tippetts</option>
                                <option value="25">Meta-Mandelbrot</option>
                            </optgroup>
                            <optgroup label="Other Fractals">
                                <option value="3">Heart</option>
                                <option value="4">Mandelbox</option>
                                <option value="6">CodeParade's Feather</option>
                                <option value="22">CodeParade's SFX</option>
                                <option value="14">Sine</option>
                                <option value="19">Marek Dragon</option>
                                <option value="20">Gangopadhyay</option>
                                <option value="21">Exponent</option>
                                <option value="24">Thorn</option>
                                <option value="27">Magnet</option>
                                <option value="28">Triple Dragon</option>
                                <option value="29">Spiral</option>
                            </optgroup>
                            <optgroup label="Chaotic Maps (generally not very fractal-ly)">
                                <option value="7">Chirikov</option>
                                <option value="11">Modified Duffing</option>
                                <option value="12">"Gingerbread"</option>
                                <option value="13">Hénon</option>
                            </optgroup>
                            <optgroup label="Custom">
                                <option value="8">Smelly Shoe</option>
                                <!-- <option value="9">Custom</option> -->
                            </optgroup>
                        </select>
                        <div id="esc_function_text">
                            z ← z<sup>2</sup> + c
                        </div>
                        <div id="scaling_div" style="display: none">
                            Scale:
                            <input id="scaling" type="number" value="2.0" step="0.025">
                        </div>
                        <div id="exponent_div" style="display: none">
                            p:
                            <input id="exponent" type="number" value="2.0" step="0.025">
                        </div>
                        <div id="rational_div" style="display: none">
                            p:
                            <input id="rational_p" type="number" value="2.0" step="0.025" min="0">
                            <br>
                            q:
                            <input id="rational_q" type="number" value="-2.0" step="0.025" max="0">
                            <br>
                            λ:
                            <input id="rational_lambda" type="number" value="0.0" step="0.0025">
                        </div>
                        <div id="phoenix_div" style="display: none">
                            <div id="phoenix_p_text" class="complex-text">
                                p = 0 + 0i
                            </div>
                            <canvas id="phoenix_p_selector" class="selector" width="200px" height="200px"></canvas>
                        </div>
                        <div id="dragon_div" style="display: none">
                            r:
                            <input id="dragon_r" type="number" value="0.041" step="0.001">
                        </div>
                        <div id="gangopadhyay_div" style="display: none">
                            ax1:
                            <input id="gangopadhyay1" type="checkbox">
                            ax2:
                            <input id="gangopadhyay2" type="checkbox">
                            ax3:
                            <input id="gangopadhyay3" type="checkbox" checked="true">
                            ax4:
                            <input id="gangopadhyay4" type="checkbox" checked="true">
                            ax5:
                            <input id="gangopadhyay5" type="checkbox">
                        </div>
                        <div id="cmultibrot_div" style="display: none">
                            <div id="cmultibrot_p_text" class="complex-text">
                                p = 2 + 0i
                            </div>
                            <canvas id="cmultibrot_p_selector" class="selector" width="200px" height="200px"></canvas>
                        </div>
                        Invert: 
                        <input type="checkbox" id="is_inverted">
                    </div>
                    <div class="input-div" id="julia_div">
                        Julia:
                        <input type="checkbox" id="is_julia">
                        <div id="julia_options" style="display: none">
                            <div id="esc_julia_text" class="complex-text">
                                c = 0 + 0i
                            </div>
                            <canvas id="julia_selector" class="selector" width="200px" height="200px"></canvas>
                        </div>
                    </div>
                    <div class="input-div">
                        Max Iterations:
                        <input id="esc_max_iterations" type="number" value="30" min="0">
                        <br>
                        Orbit Trap:
                        <select id="orbit_trap">
                            <option value="0">Normal</option>
                            <option value="1">Circle</option>
                            <option value="2">Square</option>
                            <option value="4">Ring</option>
                            <option value="3">Cross</option>
                        </select>
                        <div id="orbit_normal_div">
                            Escape Radius:
                            <input id="escape_radius" type="number" value="2.0" step="0.1" min="0">
                        </div>
                        <div id="orbit_circle_div" style="display: none">
                            Radius:
                            <input id="orbit_circle" type="number" value="0.1" step="0.01" min="0" max="1">
                        </div>
                        <div id="orbit_square_div" style="display: none">
                            Width:
                            <input id="orbit_square" type="number" value="0.1" step="0.01" min="0" max="1">
                        </div>
                        <div id="orbit_cross_div" style="display: none">
                            Width:
                            <input id="orbit_cross" type="number" value="0.1" step="0.01" min="0" max="1">
                        </div>
                        <div id="orbit_ring_div" style="display: none">
                            Min Radius:
                            <input id="orbit_ring_min" type="number" value="0.05" step="0.01" min="0" max="1">
                            <br>
                            Max Radius:
                            <input id="orbit_ring_max" type="number" value="0.12" step="0.01" min="0" max="1">
                        </div>
                    </div>
                    <div class="input-div">
                        <div id="smoothing_div">
                            Smoothing:
                            <select id="smoothing_type">
                                <option value="0">None</option>
                                <option value="1">Log</option>
                                <option value="2">Reverse</option>
                            </select>
                        </div>
                        Colouring:
                        <select id="colouring_type">
                            <option value="0">Gradient</option>
                            <option value="1">Rings</option>
                            <option value="2">Hue Cycle</option>
                            <option value="3">Binary Decomposition</option>
                        </select>
                        <br>
                        Interior Colouring:
                        <select id="interior_colouring_type">
                            <option value="0">Solid</option>
                            <option value="1">On</option>
                        </select>
                    </div>
                    <div id="colour_select" class="input-div" style="display: grid">
                        <div class="grid-entry">
                            Trapped Colour:
                            <input id="trapped_colour" type="color" value="#000000">
                        </div>
                        <div class="grid-entry">
                            Close Colour:
                            <input id="close_colour" type="color" value="#0000FF">
                        </div>
                        <div class="grid-entry">
                            Far Colour:
                            <input id="far_colour" type="color" value="#000000">
                        </div>
                    </div>
                </div>
                <div id="lyapunov_options" style="display: none">
                    <div class="input-div">
                        Chaotic Map:
                        <select id="lya_fractal_type">
                            <option value="0">Logistic</option>
                            <option value="1">Gaussian</option>
                            <option value="2">Circle</option>
                            <option value="3">Quadratic</option>
                            <option value="4">Square Logistic</option>
                            <option value="5">Squared Sine Logistic</option>
                            <option value="6">Sine</option>
                            <option value="7">Cosine</option>
                            <option value="8">Hyperbolic Cosine</option>
                        </select>
                        <div id="lya_function_text">
                            x ← rx(1 - x)
                        </div>
                        <div id="lya_gauss_div" style="display: none">
                            α:
                            <input id="lya_gauss_alpha" type="number" value="4" min="0" max="10" step="0.1">
                        </div>
                        <div id="lya_circle_div" style="display: none">
                            Ω:
                            <input id="lya_circle_omega" type="number" value="0.33" min="0" max="1" step="0.01">
                        </div>
                        <div id="lya_quadratic_div" style="display: none">
                            a: 
                            <input id="lya_quadratic_a" type="number" value="1" min="-4" max="4" step="0.1">
                        </div>
                        <div id="lya_squared_sine_div" style="display: none">
                            μ:
                            <input id="lya_squared_sine_mu" type="number" value="0.2" min="0" max="1" step="0.01">
                        </div>
                        <div id="lya_trig_div" style="display: none">
                            θ:
                            <input id="lya_trig_theta" type="number" value="0.0" min="0" max="3.14" step="0.01">
                        </div>
                        <div id="lya_cosh_div" style="display: none">
                            a:
                            <input id="lya_cosh_a" type="number" value="2" min="1" max="5" step="0.01">
                        </div>
                    </div>
                    <div class="input-div">
                        Sequence (1s, 2s, and 3s only):
                        <input id="lya_sequence" type="text" value="12" maxlength="8" size="8">
                        <br>
                        Value of "3":
                        <input id="c_value" type="range" min="0.5" max="4.5" value="2.5" step="0.005" style="width:95%">
                        <br>
                        Initial Value:
                        <input id="lya_initial" type="number" value="0.5" min="0" max="1" step="0.01">
                    </div>
                    <div class="input-div">
                        Iterations:
                        <input id="lya_iterations" type="number" value="250" min="0">
                    </div>
                    <div class="input-div" style="display: grid">
                        <div class="grid-entry">
                            Stable Colour:
                            <input id="stable_colour" type="color" value="#FFFF00">
                        </div>
                        <div class="grid-entry">
                            Chaotic Colour:
                            <input id="chaotic_colour" type="color" value="#0000FF">
                        </div>
                        <div class="grid-entry">
                            Infinity Colour:
                            <input id="infinity_colour" type="color" value="#000000">
                        </div>
                    </div>
                </div>
                <div id="root_finding_options" style="display: none;">
                    <div class="input-div">
                        Function:
                        <select id="rtf_function">
                            <option value="0">Cubic</option>
                            <option value="1">Sine</option>
                            <option value="2">General Exponent</option>
                        </select>
                        <br>
                        Algorithm:
                        <select id="rtf_algorithm">
                            <option value="0">Newton</option>
                            <option value="1">Halley</option>
                            <option value="2">Schröder</option>
                            <option value="5">Householder-3</option>
                            <option value="4">Secant</option>
                            <option value="3">Steffensen</option>
                        </select>
                        <div id="secant_div" style="display: none">
                            <br>
                            Starting point:
                            <select id="secant_start">
                                <option value="0">z0 = 0</option>
                                <option value="1">z0 = swap(z)</option>
                                <option value="2">z0 = 2z</option>
                                <option value="3">z0 = conj(z)</option>
                                <option value="4">z0 = z²</option>
                            </select>
                        </div>
                        <br>
                        Fractal Type:
                        <select id="rtf_fractal_type">
                            <option value="0">Classic</option>
                            <option value="1">Nova</option>
                            <option value="2">Nova Julia</option>
                            <option value="3">Meta Convergence</option>
                        </select>
                    </div>
                    <div class="input-div">
                        <div id="root_selector_div">
                            Roots:
                            <br>
                            <canvas id="root_selector" class="selector" width="200px" height="200px"></canvas>
                        </div>
                        <div id="rtf_exponent_div" style="display:none">
                            <div id="rtf_exponent_text" class="complex-text">
                                p: 3 + 0i
                            </div>
                            <canvas id="rtf_exponent_selector" class="selector" width="200px" height="200px"></canvas>
                        </div>
                        <div>
                            <div id="a_text" class="complex-text">
                                a = 0 + 1i
                            </div>
                            <canvas id="a_selector" class="selector" width="200px" height="200px"></canvas>
                        </div>
                        <div id="rtf_julia_div" style="display: none">
                            <div id="rtf_julia_text" class="complex-text">
                                c = 0 + 0i
                            </div>
                            <canvas id="rtf_julia_c_selector" class="selector" width="200px" height="200px"></canvas>
                        </div>
                    </div>
                    <div class="input-div">
                        Max Iterations:
                        <input id="rtf_iterations" type="number" value="40" min="0">
                        <br>
                        Bailout Threshold:
                        <input id="rtf_threshold" type="number" value="0.01" min="0" step="0.01" style="width: 70px">
                    </div>
                    <div class="input-div">
                        Colouring:
                        <select id="rtf_colouring_type">
                            <option id="rtf_root_colouring" value="0">Root</option>
                            <option id="rtf_shaded_root_colouring" value="1">Shaded Root</option>
                            <option id="rtf_convergence_colouring" value="2">Convergence</option>
                            <option id="rtf_max_orbit_dist_colouring" value="3">Max Orbit Distance</option>
                            <option id="rtf_closest_root_dist_colouring" value="4">Closest Root Distance</option>
                        </select>
                        <div id="rtf_dist_options" style="display: none">
                            Modulo:
                            <input id="rtf_dist_mod" type="number" value="2" min="0.1" max="10" step="0.1">
                        </div>
                        <div id="rtf_root_dist_options" style="display: none">
                            Brightness:
                            <input id="rtf_root_dist_brightness" type="number" value="2" min="0.1" max="10" step="0.1">
                        </div>
                    </div>
                    <div class="input-div">
                        <div id="root1_colour_div" class="grid-entry">
                            Root 1 Colour:
                            <input id="root1_colour" type="color" value="#FF0000">
                        </div>
                        <div id="root2_colour_div" class="grid-entry">
                            Root 2 Colour:
                            <input id="root2_colour" type="color" value="#00FF00">
                        </div>
                        <div id="root3_colour_div" class="grid-entry">
                            Root 3 Colour:
                            <input id="root3_colour" type="color" value="#0000FF">
                        </div>
                        <div id="convergent_colour_div" class="grid-entry" style="display: none">
                            Convergent Colour:
                            <input id="convergent_colour" type="color" value="#FFFFFF">
                        </div>
                        <div class="grid-entry">
                            Unconvergent Colour:
                            <input id="base_colour" type="color" value="#000000">
                        </div>
                    </div>
                </div>
                <div id="pendulum_options" style="display: none">
                    <div class="input-div">
                        Iterations:
                        <input id="pend_iterations" type="number" value="40" min="0">
                        <br>
                        Friction:
                        <input id="pend_friction" type="number" value="1.0" min="0" step="0.01">
                        <br>
                        Tension:
                        <input id="pend_tension" type="number" value="1.0" min="0" step="0.01">
                        <br>
                        dt:
                        <input id="pend_dt" type="number" value="0.25" min="0" max="4" step="0.01">
                    </div>
                    <div class="input-div">
                        Magnet 1 Strength:
                        <input id="magnet1_strength" type="number" value="1.0" min="0" step="0.01">
                        <br>
                        Magnet 2 Strength:
                        <input id="magnet2_strength" type="number" value="1.0" min="0" step="0.01">
                        <br>
                        Magnet 3 Strength:
                        <input id="magnet3_strength" type="number" value="1.0" min="0" step="0.01">
                    </div>
                    <div class="input-div" style="display: grid">
                        <div class="grid-entry">
                            Magnet 1 Colour:
                            <input id="magnet1_colour" type="color" value="#FF0000">
                        </div>
                        <div class="grid-entry">
                            Magnet 2 Colour:
                            <input id="magnet2_colour" type="color" value="#00FF00">
                        </div>
                        <div class="grid-entry">
                            Magnet 3 Colour:
                            <input id="magnet3_colour" type="color" value="#0000FF">
                        </div>
                    </div>
                </div>
                <div id="recursive_options" style="display: none;">
                    <div class="input-div">
                        Fractal Type:
                        <select id="rc_fractal_type">
                            <option value="0">Sierpiński Carpet</option>
                            <option value="1">Sierpiński Triangle</option>
                            <option value="2">T-square</option>
                            <option value="3">Pythagoras Tree</option>
                            <option value="4">H Tree</option>
                            <option value="5">Vicsek</option>
                        </select>
                    </div>
                    <div class="input-div">
                        Iterations:
                        <input id="rc_iterations" type="number" value="8" min="0" max="20">
                    </div>
                </div>
                <div class="input-div">
                    Samples:
                    <input id="samples" type="number" value="1" min="1" max="10">
                    <div id="display_text">
                        z = 0 + 0i
                        <br>
                        zoom = 0.5
                    </div>
                    <button onclick="resetView()">Reset View</button>
                </div>
                WASD = Move <br>
                +/- = Zoom <br>
                Don't expect every feature to <br>
                play well with every other feature!
                <a href="sources.html">Sources</a>
            </div>
        </div>
    </body>
</html>